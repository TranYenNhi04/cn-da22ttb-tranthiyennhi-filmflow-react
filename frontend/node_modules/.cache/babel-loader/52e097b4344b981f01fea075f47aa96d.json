{"ast":null,"code":"import _objectSpread from\"D:/cn/phim/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useRef}from'react';import'./HomePage.css';import{API_BASE}from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MovieCard(_ref){let{movie,commentCounts,onClick,onWatchlistClick,isInWatchlist}=_ref;const poster=movie.poster_url||movie.poster_path||movie.poster;return/*#__PURE__*/_jsx(\"div\",{className:\"movie-card\",onClick:()=>onClick&&onClick(movie),children:/*#__PURE__*/_jsxs(\"div\",{className:\"movie-thumb\",children:[poster?/*#__PURE__*/_jsx(\"img\",{src:poster,alt:movie.title,loading:\"lazy\"}):/*#__PURE__*/_jsx(\"div\",{className:\"no-poster\",children:\"Kh\\xF4ng c\\xF3 poster\"}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"overlay-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"movie-title\",children:movie.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"year\",children:movie.year}),/*#__PURE__*/_jsxs(\"span\",{className:\"rating\",children:[\"\\u2B50 \",movie.vote_average||'N/A']}),/*#__PURE__*/_jsxs(\"span\",{className:\"comments\",children:[\"\\uD83D\\uDCAC \",commentCounts&&(commentCounts[movie.id]||0)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-play\",onClick:e=>{e.stopPropagation();onClick&&onClick(movie);},children:\"\\u25B6 Xem phim\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-watchlist \".concat(isInWatchlist?'active':''),onClick:e=>{e.stopPropagation();onWatchlistClick&&onWatchlistClick(movie);},children:[isInWatchlist?'‚ù§Ô∏è':'ü§ç',\" L\\u01B0u\"]})]})]})})]})});}export default function HomePage(_ref2){let{onMovieClick}=_ref2;const[allMovies,setAllMovies]=useState([]);const[commentCounts,setCommentCounts]=useState({});const[featuredMovies,setFeaturedMovies]=useState([]);const[newMovies,setNewMovies]=useState([]);const[topRatedMovies,setTopRatedMovies]=useState([]);const[trendingMovies,setTrendingMovies]=useState([]);const[watchHistory,setWatchHistory]=useState([]);const[watchlist,setWatchlist]=useState([]);const[loading,setLoading]=useState(true);const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[isSearching,setIsSearching]=useState(false);const searchTimeoutRef=useRef(null);// Filter states\nconst[genreFilter,setGenreFilter]=useState('all');const[yearFilter,setYearFilter]=useState('all');const[sortBy,setSortBy]=useState('rating');const handleSearch=async query=>{setSearchQuery(query);if(searchTimeoutRef.current){clearTimeout(searchTimeoutRef.current);}if(query.trim().length>0){searchTimeoutRef.current=setTimeout(async()=>{setIsSearching(true);try{const response=await fetch(\"\".concat(API_BASE,\"/movies/autocomplete?q=\").concat(encodeURIComponent(query),\"&n=12\"));if(response.ok){const data=await response.json();setSearchResults(data.results||[]);}else{setSearchResults([]);}}catch(error){console.error('Search failed:',error);setSearchResults([]);}},200);}else{setIsSearching(false);setSearchResults([]);}};const fetchCommentCounts=async movies=>{try{const ids=movies.map(m=>m.id).filter(Boolean);if(!ids.length)return;const resp=await fetch(\"\".concat(API_BASE,\"/movies/comments/counts\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({movie_ids:ids})});if(resp.ok){const d=await resp.json();const counts=d.counts||d||{};setCommentCounts(prev=>_objectSpread(_objectSpread({},prev),counts));}}catch(e){console.error('Failed to fetch comment counts:',e);}};const handleWatchlistClick=async movie=>{var _JSON$parse;const storedUser=localStorage.getItem('user');const userId=storedUser?(_JSON$parse=JSON.parse(storedUser))===null||_JSON$parse===void 0?void 0:_JSON$parse.userId:'Anonymous';const isInWatchlist=watchlist.some(w=>w.movieId===movie.id);try{const response=await fetch(\"\".concat(API_BASE,\"/watchlist\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({movie_id:movie.id,user_id:userId,action:isInWatchlist?'remove':'add'})});if(response.ok){if(isInWatchlist){setWatchlist(prev=>prev.filter(w=>w.movieId!==movie.id));}else{setWatchlist(prev=>[...prev,{movieId:movie.id,added_at:new Date().toISOString()}]);}}}catch(error){console.error('Failed to update watchlist:',error);}};const isMovieInWatchlist=movieId=>watchlist.some(w=>w.movieId===movieId);const filterMovies=movies=>{let filtered=[...movies];if(genreFilter!=='all'){filtered=filtered.filter(m=>m.genres&&m.genres.includes(genreFilter));}if(yearFilter!=='all'){if(yearFilter==='2024'){filtered=filtered.filter(m=>m.year>=2024);}else if(yearFilter==='2023'){filtered=filtered.filter(m=>m.year===2023);}else if(yearFilter==='2020-2022'){filtered=filtered.filter(m=>m.year>=2020&&m.year<=2022);}else if(yearFilter==='older'){filtered=filtered.filter(m=>m.year<2020);}}if(sortBy==='rating'){filtered.sort((a,b)=>(b.vote_average||0)-(a.vote_average||0));}else if(sortBy==='newest'){filtered.sort((a,b)=>(b.year||0)-(a.year||0));}else if(sortBy==='title'){filtered.sort((a,b)=>(a.title||'').localeCompare(b.title||''));}return filtered;};useEffect(()=>{const fetchMovies=async()=>{var _JSON$parse2;// Fetch trending & new releases in parallel\ntry{const[trendingRes,newRes]=await Promise.all([fetch(\"\".concat(API_BASE,\"/movies/trending?limit=20\")),fetch(\"\".concat(API_BASE,\"/movies/new-releases?limit=20\"))]);if(trendingRes.ok){const data=await trendingRes.json();setTrendingMovies(data.movies||[]);}if(newRes.ok){const data=await newRes.json();setNewMovies(data.movies||[]);}}catch(e){console.warn('Failed to fetch trending/new:',e);}// Fetch user's watchlist and history\nconst storedUser=localStorage.getItem('user');const userId=storedUser?(_JSON$parse2=JSON.parse(storedUser))===null||_JSON$parse2===void 0?void 0:_JSON$parse2.userId:null;if(userId){try{const[historyRes,watchlistRes]=await Promise.all([fetch(\"\".concat(API_BASE,\"/watch-history/\").concat(userId)),fetch(\"\".concat(API_BASE,\"/watchlist/\").concat(userId))]);if(historyRes.ok){const data=await historyRes.json();setWatchHistory(data.history||[]);}if(watchlistRes.ok){const data=await watchlistRes.json();setWatchlist(data.watchlist||[]);}}catch(e){console.warn('Failed to fetch user data:',e);}}// Try cached recommendations first\ntry{const cacheKey=\"cached_recs_collaborative_\".concat(userId||'public');const raw=localStorage.getItem(cacheKey);if(raw){const parsed=JSON.parse(raw);const movies=parsed.results||[];if(movies.length>0){const featured=movies.filter(m=>m.vote_average>=7).slice(0,6);setFeaturedMovies(featured);setLoading(false);setTimeout(()=>{setAllMovies(movies);setTopRatedMovies([...movies].sort((a,b)=>(b.vote_average||0)-(a.vote_average||0)).slice(0,12));try{fetchCommentCounts(movies);}catch(e){}},50);}}}catch(e){console.error('Cache read error:',e);}// Fetch recommendations\ntry{const quickResp=await fetch(\"\".concat(API_BASE,\"/recommendations?rec_type=collaborative&n=6\"));if(quickResp.ok){const quickData=await quickResp.json();const movies=quickData.results||[];const featured=movies.filter(m=>m.vote_average>=7).slice(0,6);setFeaturedMovies(featured);setAllMovies(movies);setTopRatedMovies([...movies].sort((a,b)=>(b.vote_average||0)-(a.vote_average||0)).slice(0,12));setLoading(false);}}catch(errQuick){console.warn('Quick recs failed',errQuick);}// Background: fetch full results\ntry{const fullResp=await fetch(\"\".concat(API_BASE,\"/recommendations?rec_type=collaborative&n=18\"));if(fullResp.ok){const data=await fullResp.json();const fullMovies=data.results||[];const featured=fullMovies.filter(m=>m.vote_average>=7).slice(0,6);setFeaturedMovies(featured);setAllMovies(fullMovies);setTopRatedMovies([...fullMovies].sort((a,b)=>(b.vote_average||0)-(a.vote_average||0)).slice(0,12));try{fetchCommentCounts(fullMovies);}catch(e){}const cacheKey=\"cached_recs_collaborative_\".concat(userId||'public');localStorage.setItem(cacheKey,JSON.stringify({results:fullMovies}));}}catch(errFull){console.warn('Full recs failed',errFull);}};fetchMovies();},[]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"hero-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"hero-overlay\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"hero-title\",children:\"\\uD83C\\uDFAC Xem Phim Online Mi\\u1EC5n Ph\\xED\"}),/*#__PURE__*/_jsx(\"p\",{className:\"hero-subtitle\",children:\"Ch\\u1EA5t l\\u01B0\\u1EE3ng HD, c\\u1EADp nh\\u1EADt li\\xEAn t\\u1EE5c - H\\xE0ng ngh\\xECn b\\u1ED9 phim hay \\u0111ang ch\\u1EDD b\\u1EA1n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"T\\xECm ki\\u1EBFm phim...\",value:searchQuery,onChange:e=>handleSearch(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"search-btn\",children:\"\\uD83D\\uDD0D\"})]})]})}),/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u0110ang t\\u1EA3i...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid skeleton\",children:Array.from({length:8}).map((_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"movie-card skeleton-card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"movie-thumb skeleton-thumb\"})},i))})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"hero-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"hero-overlay\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"hero-title\",children:\"\\uD83C\\uDFAC Xem Phim Online Mi\\u1EC5n Ph\\xED\"}),/*#__PURE__*/_jsx(\"p\",{className:\"hero-subtitle\",children:\"Ch\\u1EA5t l\\u01B0\\u1EE3ng HD, c\\u1EADp nh\\u1EADt li\\xEAn t\\u1EE5c - H\\xE0ng ngh\\xECn b\\u1ED9 phim hay \\u0111ang ch\\u1EDD b\\u1EA1n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"T\\xECm ki\\u1EBFm phim...\",value:searchQuery,onChange:e=>handleSearch(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"search-btn\",children:\"\\uD83D\\uDD0D\"})]})]})}),!isSearching&&/*#__PURE__*/_jsxs(\"div\",{className:\"filter-bar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"filter-group\",children:/*#__PURE__*/_jsxs(\"select\",{value:genreFilter,onChange:e=>setGenreFilter(e.target.value),className:\"filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"T\\u1EA5t c\\u1EA3 th\\u1EC3 lo\\u1EA1i\"}),/*#__PURE__*/_jsx(\"option\",{value:\"action\",children:\"H\\xE0nh \\u0111\\u1ED9ng\"}),/*#__PURE__*/_jsx(\"option\",{value:\"comedy\",children:\"H\\xE0i\"}),/*#__PURE__*/_jsx(\"option\",{value:\"drama\",children:\"Ch\\xEDnh k\\u1ECBch\"}),/*#__PURE__*/_jsx(\"option\",{value:\"horror\",children:\"Kinh d\\u1ECB\"}),/*#__PURE__*/_jsx(\"option\",{value:\"romance\",children:\"L\\xE3ng m\\u1EA1n\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-group\",children:/*#__PURE__*/_jsxs(\"select\",{value:yearFilter,onChange:e=>setYearFilter(e.target.value),className:\"filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"T\\u1EA5t c\\u1EA3 n\\u0103m\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2024\",children:\"2024\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2023\",children:\"2023\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2020-2022\",children:\"2020-2022\"}),/*#__PURE__*/_jsx(\"option\",{value:\"older\",children:\"Tr\\u01B0\\u1EDBc 2020\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-group\",children:/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"rating\",children:\"\\u0110\\xE1nh gi\\xE1 cao\"}),/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:\"M\\u1EDBi nh\\u1EA5t\"}),/*#__PURE__*/_jsx(\"option\",{value:\"title\",children:\"T\\xEAn A-Z\"})]})})]}),isSearching&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"section-title\",children:[\"\\uD83D\\uDD0E K\\u1EBFt qu\\u1EA3 t\\xECm ki\\u1EBFm \\\"\",searchQuery,\"\\\"\"]})}),searchResults.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:searchResults.map((movie,idx)=>/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick,onWatchlistClick:handleWatchlistClick,isInWatchlist:isMovieInWatchlist(movie.id)},idx))}):/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"Kh\\xF4ng t\\xECm th\\u1EA5y phim\"})]}),!isSearching&&watchHistory.length>0&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDCFA Ti\\u1EBFp t\\u1EE5c xem\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:watchHistory.slice(0,12).map((entry,idx)=>{const movie=allMovies.find(m=>m.id===entry.movieId);return movie?/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick,onWatchlistClick:handleWatchlistClick,isInWatchlist:isMovieInWatchlist(movie.id)},idx):null;})})]}),!isSearching&&watchlist.length>0&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u2764\\uFE0F Phim \\u0110\\xE3 L\\u01B0u\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:watchlist.slice(0,12).map((entry,idx)=>{const movie=allMovies.find(m=>m.id===entry.movieId);return movie?/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick,onWatchlistClick:handleWatchlistClick,isInWatchlist:true},idx):null;})})]}),!isSearching&&trendingMovies.length>0&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDD25 \\u0110ang Hot Nh\\u1EA5t\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:filterMovies(trendingMovies).slice(0,12).map((movie,idx)=>/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick,onWatchlistClick:handleWatchlistClick,isInWatchlist:isMovieInWatchlist(movie.id)},idx))})]}),!isSearching&&featuredMovies.length>0&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83C\\uDFAF G\\u1EE3i \\xDD D\\xE0nh Ri\\xEAng Cho B\\u1EA1n\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:filterMovies(featuredMovies).map((movie,idx)=>/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick,onWatchlistClick:handleWatchlistClick,isInWatchlist:isMovieInWatchlist(movie.id)},idx))})]}),!isSearching&&newMovies.length>0&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83C\\uDD95 Phim M\\u1EDBi C\\u1EADp Nh\\u1EADt\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:filterMovies(newMovies).slice(0,12).map((movie,idx)=>/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick,onWatchlistClick:handleWatchlistClick,isInWatchlist:isMovieInWatchlist(movie.id)},idx))})]}),!isSearching&&topRatedMovies.length>0&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u2B50 \\u0110i\\u1EC3m Cao Nh\\u1EA5t\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:filterMovies(topRatedMovies).slice(0,12).map((movie,idx)=>/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick,onWatchlistClick:handleWatchlistClick,isInWatchlist:isMovieInWatchlist(movie.id)},idx))})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","API_BASE","jsx","_jsx","jsxs","_jsxs","MovieCard","_ref","movie","commentCounts","onClick","onWatchlistClick","isInWatchlist","poster","poster_url","poster_path","className","children","src","alt","title","loading","year","vote_average","id","e","stopPropagation","concat","HomePage","_ref2","onMovieClick","allMovies","setAllMovies","setCommentCounts","featuredMovies","setFeaturedMovies","newMovies","setNewMovies","topRatedMovies","setTopRatedMovies","trendingMovies","setTrendingMovies","watchHistory","setWatchHistory","watchlist","setWatchlist","setLoading","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearching","setIsSearching","searchTimeoutRef","genreFilter","setGenreFilter","yearFilter","setYearFilter","sortBy","setSortBy","handleSearch","query","current","clearTimeout","trim","length","setTimeout","response","fetch","encodeURIComponent","ok","data","json","results","error","console","fetchCommentCounts","movies","ids","map","m","filter","Boolean","resp","method","headers","body","JSON","stringify","movie_ids","d","counts","prev","_objectSpread","handleWatchlistClick","_JSON$parse","storedUser","localStorage","getItem","userId","parse","some","w","movieId","movie_id","user_id","action","added_at","Date","toISOString","isMovieInWatchlist","filterMovies","filtered","genres","includes","sort","a","b","localeCompare","fetchMovies","_JSON$parse2","trendingRes","newRes","Promise","all","warn","historyRes","watchlistRes","history","cacheKey","raw","parsed","featured","slice","quickResp","quickData","errQuick","fullResp","fullMovies","setItem","errFull","type","placeholder","value","onChange","target","Array","from","_","i","idx","entry","find"],"sources":["D:/cn/phim/frontend/src/pages/HomePage.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport './HomePage.css';\r\nimport { API_BASE } from '../config';\r\n\r\nfunction MovieCard({ movie, commentCounts, onClick, onWatchlistClick, isInWatchlist }) {\r\n  const poster = movie.poster_url || movie.poster_path || movie.poster;\r\n  return (\r\n    <div className=\"movie-card\" onClick={() => onClick && onClick(movie)}>\r\n      <div className=\"movie-thumb\">\r\n        {poster ? (\r\n          <img src={poster} alt={movie.title} loading=\"lazy\" />\r\n        ) : (\r\n          <div className=\"no-poster\">Kh√¥ng c√≥ poster</div>\r\n        )}\r\n        <div className=\"movie-overlay\">\r\n          <div className=\"overlay-content\">\r\n            <h3 className=\"movie-title\">{movie.title}</h3>\r\n            <div className=\"movie-meta\">\r\n              <span className=\"year\">{movie.year}</span>\r\n              <span className=\"rating\">‚≠ê {movie.vote_average || 'N/A'}</span>\r\n              <span className=\"comments\">üí¨ {commentCounts && (commentCounts[movie.id] || 0)}</span>\r\n            </div>\r\n            <div className=\"movie-actions\">\r\n              <button className=\"btn-play\" onClick={(e) => { e.stopPropagation(); onClick && onClick(movie); }}>\r\n                ‚ñ∂ Xem phim\r\n              </button>\r\n              <button \r\n                className={`btn-watchlist ${isInWatchlist ? 'active' : ''}`}\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onWatchlistClick && onWatchlistClick(movie);\r\n                }}\r\n              >\r\n                {isInWatchlist ? '‚ù§Ô∏è' : 'ü§ç'} L∆∞u\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function HomePage({ onMovieClick }) {\r\n  const [allMovies, setAllMovies] = useState([]);\r\n  const [commentCounts, setCommentCounts] = useState({});\r\n  const [featuredMovies, setFeaturedMovies] = useState([]);\r\n  const [newMovies, setNewMovies] = useState([]);\r\n  const [topRatedMovies, setTopRatedMovies] = useState([]);\r\n  const [trendingMovies, setTrendingMovies] = useState([]);\r\n  const [watchHistory, setWatchHistory] = useState([]);\r\n  const [watchlist, setWatchlist] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const searchTimeoutRef = useRef(null);\r\n  \r\n  // Filter states\r\n  const [genreFilter, setGenreFilter] = useState('all');\r\n  const [yearFilter, setYearFilter] = useState('all');\r\n  const [sortBy, setSortBy] = useState('rating');\r\n\r\n  const handleSearch = async (query) => {\r\n    setSearchQuery(query);\r\n    if (searchTimeoutRef.current) {\r\n      clearTimeout(searchTimeoutRef.current);\r\n    }\r\n    if (query.trim().length > 0) {\r\n      searchTimeoutRef.current = setTimeout(async () => {\r\n        setIsSearching(true);\r\n        try {\r\n          const response = await fetch(`${API_BASE}/movies/autocomplete?q=${encodeURIComponent(query)}&n=12`);\r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            setSearchResults(data.results || []);\r\n          } else {\r\n            setSearchResults([]);\r\n          }\r\n        } catch (error) {\r\n          console.error('Search failed:', error);\r\n          setSearchResults([]);\r\n        }\r\n      }, 200);\r\n    } else {\r\n      setIsSearching(false);\r\n      setSearchResults([]);\r\n    }\r\n  };\r\n\r\n  const fetchCommentCounts = async (movies) => {\r\n    try {\r\n      const ids = movies.map(m => m.id).filter(Boolean);\r\n      if (!ids.length) return;\r\n      const resp = await fetch(`${API_BASE}/movies/comments/counts`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ movie_ids: ids }),\r\n      });\r\n      if (resp.ok) {\r\n        const d = await resp.json();\r\n        const counts = d.counts || d || {};\r\n        setCommentCounts(prev => ({ ...prev, ...counts }));\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to fetch comment counts:', e);\r\n    }\r\n  };\r\n\r\n  const handleWatchlistClick = async (movie) => {\r\n    const storedUser = localStorage.getItem('user');\r\n    const userId = storedUser ? JSON.parse(storedUser)?.userId : 'Anonymous';\r\n    const isInWatchlist = watchlist.some(w => w.movieId === movie.id);\r\n    \r\n    try {\r\n      const response = await fetch(`${API_BASE}/watchlist`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          movie_id: movie.id,\r\n          user_id: userId,\r\n          action: isInWatchlist ? 'remove' : 'add'\r\n        })\r\n      });\r\n      \r\n      if (response.ok) {\r\n        if (isInWatchlist) {\r\n          setWatchlist(prev => prev.filter(w => w.movieId !== movie.id));\r\n        } else {\r\n          setWatchlist(prev => [...prev, { movieId: movie.id, added_at: new Date().toISOString() }]);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to update watchlist:', error);\r\n    }\r\n  };\r\n\r\n  const isMovieInWatchlist = (movieId) => watchlist.some(w => w.movieId === movieId);\r\n\r\n  const filterMovies = (movies) => {\r\n    let filtered = [...movies];\r\n    if (genreFilter !== 'all') {\r\n      filtered = filtered.filter(m => m.genres && m.genres.includes(genreFilter));\r\n    }\r\n    if (yearFilter !== 'all') {\r\n      if (yearFilter === '2024') {\r\n        filtered = filtered.filter(m => m.year >= 2024);\r\n      } else if (yearFilter === '2023') {\r\n        filtered = filtered.filter(m => m.year === 2023);\r\n      } else if (yearFilter === '2020-2022') {\r\n        filtered = filtered.filter(m => m.year >= 2020 && m.year <= 2022);\r\n      } else if (yearFilter === 'older') {\r\n        filtered = filtered.filter(m => m.year < 2020);\r\n      }\r\n    }\r\n    if (sortBy === 'rating') {\r\n      filtered.sort((a, b) => (b.vote_average || 0) - (a.vote_average || 0));\r\n    } else if (sortBy === 'newest') {\r\n      filtered.sort((a, b) => (b.year || 0) - (a.year || 0));\r\n    } else if (sortBy === 'title') {\r\n      filtered.sort((a, b) => (a.title || '').localeCompare(b.title || ''));\r\n    }\r\n    \r\n    return filtered;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchMovies = async () => {\r\n      // Fetch trending & new releases in parallel\r\n      try {\r\n        const [trendingRes, newRes] = await Promise.all([\r\n          fetch(`${API_BASE}/movies/trending?limit=20`),\r\n          fetch(`${API_BASE}/movies/new-releases?limit=20`)\r\n        ]);\r\n        \r\n        if (trendingRes.ok) {\r\n          const data = await trendingRes.json();\r\n          setTrendingMovies(data.movies || []);\r\n        }\r\n        if (newRes.ok) {\r\n          const data = await newRes.json();\r\n          setNewMovies(data.movies || []);\r\n        }\r\n      } catch (e) {\r\n        console.warn('Failed to fetch trending/new:', e);\r\n      }\r\n\r\n      // Fetch user's watchlist and history\r\n      const storedUser = localStorage.getItem('user');\r\n      const userId = storedUser ? JSON.parse(storedUser)?.userId : null;\r\n      \r\n      if (userId) {\r\n        try {\r\n          const [historyRes, watchlistRes] = await Promise.all([\r\n            fetch(`${API_BASE}/watch-history/${userId}`),\r\n            fetch(`${API_BASE}/watchlist/${userId}`)\r\n          ]);\r\n          \r\n          if (historyRes.ok) {\r\n            const data = await historyRes.json();\r\n            setWatchHistory(data.history || []);\r\n          }\r\n          if (watchlistRes.ok) {\r\n            const data = await watchlistRes.json();\r\n            setWatchlist(data.watchlist || []);\r\n          }\r\n        } catch (e) {\r\n          console.warn('Failed to fetch user data:', e);\r\n        }\r\n      }\r\n\r\n      // Try cached recommendations first\r\n      try {\r\n        const cacheKey = `cached_recs_collaborative_${userId || 'public'}`;\r\n        const raw = localStorage.getItem(cacheKey);\r\n        if (raw) {\r\n          const parsed = JSON.parse(raw);\r\n          const movies = parsed.results || [];\r\n          if (movies.length > 0) {\r\n            const featured = movies.filter(m => m.vote_average >= 7).slice(0, 6);\r\n            setFeaturedMovies(featured);\r\n            setLoading(false);\r\n            setTimeout(() => {\r\n              setAllMovies(movies);\r\n              setTopRatedMovies([...movies].sort((a, b) => (b.vote_average || 0) - (a.vote_average || 0)).slice(0, 12));\r\n              try { fetchCommentCounts(movies); } catch (e) {}\r\n            }, 50);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error('Cache read error:', e);\r\n      }\r\n\r\n      // Fetch recommendations\r\n      try {\r\n        const quickResp = await fetch(`${API_BASE}/recommendations?rec_type=collaborative&n=6`);\r\n        if (quickResp.ok) {\r\n          const quickData = await quickResp.json();\r\n          const movies = quickData.results || [];\r\n          const featured = movies.filter(m => m.vote_average >= 7).slice(0, 6);\r\n          setFeaturedMovies(featured);\r\n          setAllMovies(movies);\r\n          setTopRatedMovies([...movies].sort((a, b) => (b.vote_average || 0) - (a.vote_average || 0)).slice(0, 12));\r\n          setLoading(false);\r\n        }\r\n      } catch (errQuick) {\r\n        console.warn('Quick recs failed', errQuick);\r\n      }\r\n\r\n      // Background: fetch full results\r\n      try {\r\n        const fullResp = await fetch(`${API_BASE}/recommendations?rec_type=collaborative&n=18`);\r\n        if (fullResp.ok) {\r\n          const data = await fullResp.json();\r\n          const fullMovies = data.results || [];\r\n          const featured = fullMovies.filter(m => m.vote_average >= 7).slice(0, 6);\r\n          setFeaturedMovies(featured);\r\n          setAllMovies(fullMovies);\r\n          setTopRatedMovies([...fullMovies].sort((a, b) => (b.vote_average || 0) - (a.vote_average || 0)).slice(0, 12));\r\n          try { fetchCommentCounts(fullMovies); } catch (e) {}\r\n          const cacheKey = `cached_recs_collaborative_${userId || 'public'}`;\r\n          localStorage.setItem(cacheKey, JSON.stringify({ results: fullMovies }));\r\n        }\r\n      } catch (errFull) {\r\n        console.warn('Full recs failed', errFull);\r\n      }\r\n    };\r\n\r\n    fetchMovies();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"home-page\">\r\n        <section className=\"hero-section\">\r\n          <div className=\"hero-overlay\">\r\n            <h1 className=\"hero-title\">üé¨ Xem Phim Online Mi·ªÖn Ph√≠</h1>\r\n            <p className=\"hero-subtitle\">Ch·∫•t l∆∞·ª£ng HD, c·∫≠p nh·∫≠t li√™n t·ª•c - H√†ng ngh√¨n b·ªô phim hay ƒëang ch·ªù b·∫°n</p>\r\n            <div className=\"search-container\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"search-input\"\r\n                placeholder=\"T√¨m ki·∫øm phim...\"\r\n                value={searchQuery}\r\n                onChange={(e) => handleSearch(e.target.value)}\r\n              />\r\n              <button className=\"search-btn\">üîç</button>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">ƒêang t·∫£i...</h2>\r\n          </div>\r\n          <div className=\"movie-grid skeleton\">\r\n            {Array.from({ length: 8 }).map((_, i) => (\r\n              <div className=\"movie-card skeleton-card\" key={i}>\r\n                <div className=\"movie-thumb skeleton-thumb\" />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"home-page\">\r\n      {/* Hero Section */}\r\n      <section className=\"hero-section\">\r\n        <div className=\"hero-overlay\">\r\n          <h1 className=\"hero-title\">üé¨ Xem Phim Online Mi·ªÖn Ph√≠</h1>\r\n          <p className=\"hero-subtitle\">Ch·∫•t l∆∞·ª£ng HD, c·∫≠p nh·∫≠t li√™n t·ª•c - H√†ng ngh√¨n b·ªô phim hay ƒëang ch·ªù b·∫°n</p>\r\n          <div className=\"search-container\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"search-input\"\r\n              placeholder=\"T√¨m ki·∫øm phim...\"\r\n              value={searchQuery}\r\n              onChange={(e) => handleSearch(e.target.value)}\r\n            />\r\n            <button className=\"search-btn\">üîç</button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Filter Bar */}\r\n      {!isSearching && (\r\n        <div className=\"filter-bar\">\r\n          <div className=\"filter-group\">\r\n            <select value={genreFilter} onChange={(e) => setGenreFilter(e.target.value)} className=\"filter-select\">\r\n              <option value=\"all\">T·∫•t c·∫£ th·ªÉ lo·∫°i</option>\r\n              <option value=\"action\">H√†nh ƒë·ªông</option>\r\n              <option value=\"comedy\">H√†i</option>\r\n              <option value=\"drama\">Ch√≠nh k·ªãch</option>\r\n              <option value=\"horror\">Kinh d·ªã</option>\r\n              <option value=\"romance\">L√£ng m·∫°n</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"filter-group\">\r\n            <select value={yearFilter} onChange={(e) => setYearFilter(e.target.value)} className=\"filter-select\">\r\n              <option value=\"all\">T·∫•t c·∫£ nƒÉm</option>\r\n              <option value=\"2024\">2024</option>\r\n              <option value=\"2023\">2023</option>\r\n              <option value=\"2020-2022\">2020-2022</option>\r\n              <option value=\"older\">Tr∆∞·ªõc 2020</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"filter-group\">\r\n            <select value={sortBy} onChange={(e) => setSortBy(e.target.value)} className=\"filter-select\">\r\n              <option value=\"rating\">ƒê√°nh gi√° cao</option>\r\n              <option value=\"newest\">M·ªõi nh·∫•t</option>\r\n              <option value=\"title\">T√™n A-Z</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Search Results */}\r\n      {isSearching && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">üîé K·∫øt qu·∫£ t√¨m ki·∫øm \"{searchQuery}\"</h2>\r\n          </div>\r\n          {searchResults.length > 0 ? (\r\n            <div className=\"movie-grid\">\r\n              {searchResults.map((movie, idx) => (\r\n                <MovieCard \r\n                  key={idx} \r\n                  movie={movie} \r\n                  commentCounts={commentCounts} \r\n                  onClick={onMovieClick}\r\n                  onWatchlistClick={handleWatchlistClick}\r\n                  isInWatchlist={isMovieInWatchlist(movie.id)}\r\n                />\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"no-results\">Kh√¥ng t√¨m th·∫•y phim</div>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {/* Watch History */}\r\n      {!isSearching && watchHistory.length > 0 && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">üì∫ Ti·∫øp t·ª•c xem</h2>\r\n          </div>\r\n          <div className=\"movie-grid\">\r\n            {watchHistory.slice(0, 12).map((entry, idx) => {\r\n              const movie = allMovies.find(m => m.id === entry.movieId);\r\n              return movie ? (\r\n                <MovieCard \r\n                  key={idx} \r\n                  movie={movie} \r\n                  commentCounts={commentCounts} \r\n                  onClick={onMovieClick}\r\n                  onWatchlistClick={handleWatchlistClick}\r\n                  isInWatchlist={isMovieInWatchlist(movie.id)}\r\n                />\r\n              ) : null;\r\n            })}\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {/* Watchlist */}\r\n      {!isSearching && watchlist.length > 0 && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">‚ù§Ô∏è Phim ƒê√£ L∆∞u</h2>\r\n          </div>\r\n          <div className=\"movie-grid\">\r\n            {watchlist.slice(0, 12).map((entry, idx) => {\r\n              const movie = allMovies.find(m => m.id === entry.movieId);\r\n              return movie ? (\r\n                <MovieCard \r\n                  key={idx} \r\n                  movie={movie} \r\n                  commentCounts={commentCounts} \r\n                  onClick={onMovieClick}\r\n                  onWatchlistClick={handleWatchlistClick}\r\n                  isInWatchlist={true}\r\n                />\r\n              ) : null;\r\n            })}\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {/* Trending */}\r\n      {!isSearching && trendingMovies.length > 0 && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">üî• ƒêang Hot Nh·∫•t</h2>\r\n          </div>\r\n          <div className=\"movie-grid\">\r\n            {filterMovies(trendingMovies).slice(0, 12).map((movie, idx) => (\r\n              <MovieCard \r\n                key={idx} \r\n                movie={movie} \r\n                commentCounts={commentCounts} \r\n                onClick={onMovieClick}\r\n                onWatchlistClick={handleWatchlistClick}\r\n                isInWatchlist={isMovieInWatchlist(movie.id)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {/* Featured/Recommendations */}\r\n      {!isSearching && featuredMovies.length > 0 && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">üéØ G·ª£i √ù D√†nh Ri√™ng Cho B·∫°n</h2>\r\n          </div>\r\n          <div className=\"movie-grid\">\r\n            {filterMovies(featuredMovies).map((movie, idx) => (\r\n              <MovieCard \r\n                key={idx} \r\n                movie={movie} \r\n                commentCounts={commentCounts} \r\n                onClick={onMovieClick}\r\n                onWatchlistClick={handleWatchlistClick}\r\n                isInWatchlist={isMovieInWatchlist(movie.id)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {/* New Releases */}\r\n      {!isSearching && newMovies.length > 0 && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">üÜï Phim M·ªõi C·∫≠p Nh·∫≠t</h2>\r\n          </div>\r\n          <div className=\"movie-grid\">\r\n            {filterMovies(newMovies).slice(0, 12).map((movie, idx) => (\r\n              <MovieCard \r\n                key={idx} \r\n                movie={movie} \r\n                commentCounts={commentCounts} \r\n                onClick={onMovieClick}\r\n                onWatchlistClick={handleWatchlistClick}\r\n                isInWatchlist={isMovieInWatchlist(movie.id)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {/* Top Rated */}\r\n      {!isSearching && topRatedMovies.length > 0 && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">‚≠ê ƒêi·ªÉm Cao Nh·∫•t</h2>\r\n          </div>\r\n          <div className=\"movie-grid\">\r\n            {filterMovies(topRatedMovies).slice(0, 12).map((movie, idx) => (\r\n              <MovieCard \r\n                key={idx} \r\n                movie={movie} \r\n                commentCounts={commentCounts} \r\n                onClick={onMovieClick}\r\n                onWatchlistClick={handleWatchlistClick}\r\n                isInWatchlist={isMovieInWatchlist(movie.id)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </section>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}