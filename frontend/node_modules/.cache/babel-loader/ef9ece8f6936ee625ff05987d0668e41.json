{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function RecommendationsPage(){const[recType,setRecType]=useState('collaborative');const[userId,setUserId]=useState('');const[movieId,setMovieId]=useState('');const[recommendations,setRecommendations]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const handleGetRecommendations=async()=>{setLoading(true);setError('');setRecommendations([]);try{const params=new URLSearchParams();if(userId)params.append('user_id',userId);if(movieId)params.append('movie_id',movieId);params.append('n','10');const response=await fetch(\"http://backend:8000/recommendations/\".concat(recType,\"?\").concat(params));if(!response.ok)throw new Error('Lỗi lấy gợi ý');const data=await response.json();setRecommendations(data.results||[]);if(!data.results||data.results.length===0){setError('Không có gợi ý nào');}}catch(err){setError(err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-header\",children:\"\\u2B50 G\\u1EE3i \\xFD Phim\"}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#f3f4f6',padding:'20px',borderRadius:'8px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'10px'},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Lo\\u1EA1i g\\u1EE3i \\xFD:\"})}),/*#__PURE__*/_jsxs(\"select\",{value:recType,onChange:e=>setRecType(e.target.value),style:{padding:'8px',borderRadius:'6px',border:'1px solid #d1d5db'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"collaborative\",children:\"Collaborative Filtering\"}),/*#__PURE__*/_jsx(\"option\",{value:\"content\",children:\"Content-based Filtering\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hybrid\",children:\"Hybrid Filtering\"})]}),(recType==='collaborative'||recType==='hybrid')&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px'},children:\"ID Ng\\u01B0\\u1EDDi d\\xF9ng (t\\xF9y ch\\u1ECDn):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:userId,onChange:e=>setUserId(e.target.value),className:\"search-box\",style:{maxWidth:'200px'},placeholder:\"Nh\\u1EADp ID\"})]}),(recType==='content'||recType==='hybrid')&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px'},children:\"ID Phim (t\\xF9y ch\\u1ECDn):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:movieId,onChange:e=>setMovieId(e.target.value),className:\"search-box\",style:{maxWidth:'200px'},placeholder:\"Nh\\u1EADp ID\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGetRecommendations,className:\"btn\",style:{marginTop:'15px'},children:\"L\\u1EA5y g\\u1EE3i \\xFD\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0110ang t\\u1EA3i...\"}),recommendations.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:'20px',color:'#6b7280'},children:[\"C\\xF3 \",recommendations.length,\" g\\u1EE3i \\xFD cho b\\u1EA1n\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-list\",children:recommendations.map((movie,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"movie-card\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[movie.title,\" \",movie.year>0&&\"(\".concat(movie.year,\")\")]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Overview:\"}),\" \",movie.overview]}),/*#__PURE__*/_jsxs(\"p\",{className:\"rating\",children:[\"\\u2B50 \",movie.vote_average||'N/A',\"/10\"]}),movie.video_url&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px'},children:/*#__PURE__*/_jsx(\"a\",{href:movie.video_url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"btn\",style:{display:'inline-block',textDecoration:'none'},children:\"\\u25B6 Xem trailer\"})})]},idx))})]})]});}","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","RecommendationsPage","recType","setRecType","userId","setUserId","movieId","setMovieId","recommendations","setRecommendations","loading","setLoading","error","setError","handleGetRecommendations","params","URLSearchParams","append","response","fetch","concat","ok","Error","data","json","results","length","err","message","children","className","style","background","padding","borderRadius","marginBottom","display","value","onChange","e","target","border","marginTop","type","maxWidth","placeholder","onClick","color","map","movie","idx","title","year","overview","vote_average","video_url","href","rel","textDecoration"],"sources":["D:/cn/phim/frontend/src/pages/RecommendationsPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nexport default function RecommendationsPage() {\r\n  const [recType, setRecType] = useState('collaborative');\r\n  const [userId, setUserId] = useState('');\r\n  const [movieId, setMovieId] = useState('');\r\n  const [recommendations, setRecommendations] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleGetRecommendations = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    setRecommendations([]);\r\n\r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (userId) params.append('user_id', userId);\r\n      if (movieId) params.append('movie_id', movieId);\r\n      params.append('n', '10');\r\n\r\n      const response = await fetch(`http://backend:8000/recommendations/${recType}?${params}`);\r\n      if (!response.ok) throw new Error('Lỗi lấy gợi ý');\r\n      const data = await response.json();\r\n      setRecommendations(data.results || []);\r\n      if (!data.results || data.results.length === 0) {\r\n        setError('Không có gợi ý nào');\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"page-header\">⭐ Gợi ý Phim</h1>\r\n\r\n      <div style={{ background: '#f3f4f6', padding: '20px', borderRadius: '8px', marginBottom: '20px' }}>\r\n        <label style={{ display: 'block', marginBottom: '10px' }}>\r\n          <strong>Loại gợi ý:</strong>\r\n        </label>\r\n        <select \r\n          value={recType} \r\n          onChange={(e) => setRecType(e.target.value)}\r\n          style={{ padding: '8px', borderRadius: '6px', border: '1px solid #d1d5db' }}\r\n        >\r\n          <option value=\"collaborative\">Collaborative Filtering</option>\r\n          <option value=\"content\">Content-based Filtering</option>\r\n          <option value=\"hybrid\">Hybrid Filtering</option>\r\n        </select>\r\n\r\n        {(recType === 'collaborative' || recType === 'hybrid') && (\r\n          <div style={{ marginTop: '15px' }}>\r\n            <label style={{ display: 'block', marginBottom: '5px' }}>\r\n              ID Người dùng (tùy chọn):\r\n            </label>\r\n            <input \r\n              type=\"number\"\r\n              value={userId}\r\n              onChange={(e) => setUserId(e.target.value)}\r\n              className=\"search-box\"\r\n              style={{ maxWidth: '200px' }}\r\n              placeholder=\"Nhập ID\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {(recType === 'content' || recType === 'hybrid') && (\r\n          <div style={{ marginTop: '15px' }}>\r\n            <label style={{ display: 'block', marginBottom: '5px' }}>\r\n              ID Phim (tùy chọn):\r\n            </label>\r\n            <input \r\n              type=\"number\"\r\n              value={movieId}\r\n              onChange={(e) => setMovieId(e.target.value)}\r\n              className=\"search-box\"\r\n              style={{ maxWidth: '200px' }}\r\n              placeholder=\"Nhập ID\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        <button onClick={handleGetRecommendations} className=\"btn\" style={{ marginTop: '15px' }}>\r\n          Lấy gợi ý\r\n        </button>\r\n      </div>\r\n\r\n      {error && <div className=\"error\">{error}</div>}\r\n      {loading && <div className=\"loading\">Đang tải...</div>}\r\n\r\n      {recommendations.length > 0 && (\r\n        <div>\r\n          <p style={{ marginTop: '20px', color: '#6b7280' }}>Có {recommendations.length} gợi ý cho bạn</p>\r\n          <div className=\"movie-list\">\r\n            {recommendations.map((movie, idx) => (\r\n              <div key={idx} className=\"movie-card\">\r\n                <h3>{movie.title} {movie.year > 0 && `(${movie.year})`}</h3>\r\n                <p><strong>Overview:</strong> {movie.overview}</p>\r\n                <p className=\"rating\">⭐ {movie.vote_average || 'N/A'}/10</p>\r\n                {movie.video_url && (\r\n                  <div style={{ marginTop: '10px' }}>\r\n                    <a href={movie.video_url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"btn\" style={{ display: 'inline-block', textDecoration: 'none' }}>\r\n                      ▶ Xem trailer\r\n                    </a>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}