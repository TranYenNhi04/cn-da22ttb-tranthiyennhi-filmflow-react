{"ast":null,"code":"import _objectSpread from\"D:/cn/phim/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useRef}from'react';import'./HomePage.css';import{API_BASE}from'../config';import{MovieGridSkeleton,SectionSkeleton}from'../components/MovieSkeleton';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MovieCard(_ref){let{movie,commentCounts,onClick}=_ref;const poster=movie.poster_url||movie.poster_path||movie.poster;return/*#__PURE__*/_jsx(\"div\",{className:\"movie-card\",onClick:()=>onClick&&onClick(movie),children:/*#__PURE__*/_jsxs(\"div\",{className:\"movie-thumb\",children:[poster?/*#__PURE__*/_jsx(\"img\",{src:poster,alt:movie.title,loading:\"lazy\",decoding:\"async\",onError:e=>{e.target.onerror=null;e.target.src=\"https://picsum.photos/seed/\".concat(movie.id||movie.title,\"/300/450\");}}):/*#__PURE__*/_jsx(\"div\",{className:\"no-poster\",children:\"Kh\\xF4ng c\\xF3 poster\"}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"overlay-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"movie-title\",children:movie.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"year\",children:movie.year}),/*#__PURE__*/_jsxs(\"span\",{className:\"rating\",children:[\"\\u2B50 \",movie.vote_average||'N/A']}),/*#__PURE__*/_jsxs(\"span\",{className:\"comments\",children:[\"\\uD83D\\uDCAC \",commentCounts&&(commentCounts[movie.id]||0)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-play\",onClick:e=>{e.stopPropagation();onClick&&onClick(movie);},children:\"\\u25B6 Xem phim\"})})]})})]})});}export default function HomePage(_ref2){let{onMovieClick}=_ref2;const[allMovies,setAllMovies]=useState([]);const[commentCounts,setCommentCounts]=useState({});const[featuredMovies,setFeaturedMovies]=useState([]);const[newMovies,setNewMovies]=useState([]);const[topRatedMovies,setTopRatedMovies]=useState([]);const[trendingMovies,setTrendingMovies]=useState([]);const[heroMovies,setHeroMovies]=useState([]);const[watchHistory,setWatchHistory]=useState([]);const[loading,setLoading]=useState(false);const[loadingSections,setLoadingSections]=useState({trending:true,featured:true,topRated:true,new:true});const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[isSearching,setIsSearching]=useState(false);const searchTimeoutRef=useRef(null);// Filter states\nconst[genreFilter,setGenreFilter]=useState('all');const[yearFilter,setYearFilter]=useState('all');const[sortBy,setSortBy]=useState('rating');const handleSearch=async query=>{setSearchQuery(query);if(searchTimeoutRef.current){clearTimeout(searchTimeoutRef.current);}if(query.trim().length>0){// Check cache first for instant results\nconst cacheKey=\"search_\".concat(query.toLowerCase().trim());const cached=localStorage.getItem(cacheKey);if(cached){try{const parsed=JSON.parse(cached);const age=Date.now()-parsed.timestamp;if(age<300000){// 5 minutes cache\nsetSearchResults(parsed.results||[]);setIsSearching(true);return;}}catch(e){}}searchTimeoutRef.current=setTimeout(async()=>{setIsSearching(true);try{var _JSON$parse;// Save search to history\nconst storedUser=localStorage.getItem('user');const userId=storedUser?(_JSON$parse=JSON.parse(storedUser))===null||_JSON$parse===void 0?void 0:_JSON$parse.userId:null;const userParam=userId?\"&user_id=\".concat(encodeURIComponent(userId)):'';const response=await fetch(\"\".concat(API_BASE,\"/movies/autocomplete?q=\").concat(encodeURIComponent(query),\"&n=20\").concat(userParam));if(response.ok){const data=await response.json();const results=data.results||[];setSearchResults(results);// Cache results\ntry{localStorage.setItem(cacheKey,JSON.stringify({results:results,timestamp:Date.now()}));}catch(e){}}else{setSearchResults([]);}}catch(error){console.error('Search failed:',error);setSearchResults([]);}},150);// Faster debounce\n}else{setIsSearching(false);setSearchResults([]);}};const fetchCommentCounts=async movies=>{try{const ids=movies.map(m=>m.id).filter(Boolean);if(!ids.length)return;const resp=await fetch(\"\".concat(API_BASE,\"/movies/comments/counts\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({movie_ids:ids})});if(resp.ok){const d=await resp.json();const counts=d.counts||d||{};setCommentCounts(prev=>_objectSpread(_objectSpread({},prev),counts));}}catch(e){console.error('Failed to fetch comment counts:',e);}};// Map Vietnamese genre names to English equivalents\nconst genreMap={'action':['action','h√†nh ƒë·ªông'],'comedy':['comedy','h√†i'],'drama':['drama','ch√≠nh k·ªãch'],'horror':['horror','kinh d·ªã'],'romance':['romance','l√£ng m·∫°n']};const filterMovies=movies=>{let filtered=[...movies];// Genre filter - match both English and Vietnamese names\nif(genreFilter!=='all'){const targetGenres=genreMap[genreFilter.toLowerCase()]||[genreFilter.toLowerCase()];filtered=filtered.filter(m=>{try{let genres=m.genres;if(typeof genres==='string'){genres=JSON.parse(genres);}if(Array.isArray(genres)){const genreNames=genres.map(g=>{if(typeof g==='string')return g.toLowerCase();if(g.name)return g.name.toLowerCase();return'';});// Check if any genre name matches any target genre\nreturn genreNames.some(gn=>targetGenres.some(tg=>gn.includes(tg)||tg.includes(gn)));}return false;}catch(e){console.warn('Genre parse error:',e);return false;}});}// Year filter\nif(yearFilter!=='all'){if(yearFilter==='2024'){filtered=filtered.filter(m=>m.year>=2024);}else if(yearFilter==='2023'){filtered=filtered.filter(m=>m.year===2023);}else if(yearFilter==='2020-2022'){filtered=filtered.filter(m=>m.year>=2020&&m.year<=2022);}else if(yearFilter==='older'){filtered=filtered.filter(m=>m.year<2020);}}// Sorting\nif(sortBy==='rating'){filtered.sort((a,b)=>(b.vote_average||0)-(a.vote_average||0));}else if(sortBy==='newest'){filtered.sort((a,b)=>(b.year||0)-(a.year||0));}else if(sortBy==='title'){filtered.sort((a,b)=>(a.title||'').localeCompare(b.title||''));}return filtered;};useEffect(()=>{const fetchMovies=async()=>{var _JSON$parse2;const storedUser=localStorage.getItem('user');const userId=storedUser?(_JSON$parse2=JSON.parse(storedUser))===null||_JSON$parse2===void 0?void 0:_JSON$parse2.userId:null;// INSTANT DISPLAY: Load from cache FIRST, show immediately\ntry{// Load watchlist from cache FIRST\nif(userId){const watchlistCache=localStorage.getItem(\"watchlist_\".concat(userId));if(watchlistCache){try{const cached=JSON.parse(watchlistCache);if(Array.isArray(cached)){setWatchlist(cached);}}catch(e){}}}// Load trending from cache instantly\nconst trendingCache=localStorage.getItem('cached_trending');if(trendingCache){try{const parsed=JSON.parse(trendingCache);if(parsed.movies&&parsed.movies.length>0){setTrendingMovies(parsed.movies);setHeroMovies(parsed.movies.slice(0,20));setLoadingSections(prev=>_objectSpread(_objectSpread({},prev),{},{trending:false}));}}catch(e){}}// Load featured from cache instantly\nconst cacheKey=\"cached_recs_collaborative_\".concat(userId||'public');const cached=localStorage.getItem(cacheKey);if(cached){try{const parsed=JSON.parse(cached);const movies=parsed.results||[];if(movies.length>0){const featured=movies.filter(m=>m.vote_average>=7).slice(0,6);setFeaturedMovies(featured);setAllMovies(movies);setTopRatedMovies([...movies].sort((a,b)=>(b.vote_average||0)-(a.vote_average||0)).slice(0,12));setLoadingSections(prev=>_objectSpread(_objectSpread({},prev),{},{featured:false,topRated:false}));}}catch(e){}}// Load new releases from cache\nconst newCache=localStorage.getItem('cached_new_releases');if(newCache){try{const parsed=JSON.parse(newCache);if(parsed.movies&&parsed.movies.length>0){setNewMovies(parsed.movies);setLoadingSections(prev=>_objectSpread(_objectSpread({},prev),{},{new:false}));}}catch(e){}}}catch(e){console.warn('Cache load failed:',e);}// BACKGROUND FETCH: Update with fresh data without blocking UI\ntry{// Fetch trending in background\nfetch(\"\".concat(API_BASE,\"/movies/trending?limit=12\")).then(res=>res.ok?res.json():null).then(data=>{if(data&&data.movies){const movies=data.movies;setTrendingMovies(movies);setHeroMovies(movies.slice(0,20));setLoadingSections(prev=>_objectSpread(_objectSpread({},prev),{},{trending:false}));// Cache for next time\ntry{localStorage.setItem('cached_trending',JSON.stringify({movies,ts:Date.now()}));}catch(e){}if(movies.length>0){fetchCommentCounts(movies);}}}).catch(e=>{console.error('Trending fetch failed:',e);setLoadingSections(prev=>_objectSpread(_objectSpread({},prev),{},{trending:false}));});// Fetch featured recommendations (in background, async, don't wait)\nsetLoadingSections(prev=>_objectSpread(_objectSpread({},prev),{},{featured:true,topRated:true}));fetch(\"\".concat(API_BASE,\"/recommendations?rec_type=collaborative&n=50\")).then(recResp=>{if(recResp.ok){return recResp.json();}setLoadingSections(prev=>_objectSpread(_objectSpread({},prev),{},{featured:false,topRated:false}));return null;}).then(data=>{if(data){const movies=data.results||[];// Filter out movies that are already in trending to avoid duplicates\nconst trendingIds=new Set(trendingMovies.map(m=>m.id));const uniqueMovies=movies.filter(m=>!trendingIds.has(m.id));// Split into sections ensuring no overlap\nconst featured=uniqueMovies.filter(m=>m.vote_average>=7).slice(0,6);const featuredIds=new Set(featured.map(m=>m.id));// Top rated - exclude trending and featured\nconst topRated=[...uniqueMovies].filter(m=>!featuredIds.has(m.id)).sort((a,b)=>(b.vote_average||0)-(a.vote_average||0)).slice(0,12);setFeaturedMovies(featured);setAllMovies(uniqueMovies.slice(0,12));setTopRatedMovies(topRated);setLoadingSections(prev=>_objectSpread(_objectSpread({},prev),{},{featured:false,topRated:false}));localStorage.setItem(cacheKey,JSON.stringify({results:uniqueMovies}));// Fetch comment counts for all movies\nfetchCommentCounts([...featured,...topRated]);}}).catch(e=>{console.warn('Recommendations fetch failed:',e);setLoadingSections(prev=>_objectSpread(_objectSpread({},prev),{},{featured:false,topRated:false}));});}catch(e){console.warn('Priority fetch failed:',e);}// PRIORITY 2: Background fetches (don't block UI)\n// Fetch user data\nif(userId){try{const[historyRes,watchlistRes]=await Promise.all([fetch(\"\".concat(API_BASE,\"/watch-history/\").concat(userId)),fetch(\"\".concat(API_BASE,\"/watchlist/\").concat(userId))]);if(historyRes.ok){const data=await historyRes.json();const history=data.movies||data.history||[];// Deduplicate by movieId - keep only most recent entry for each movie\nconst uniqueHistory=[];const seenMovieIds=new Set();history.forEach(entry=>{if(!seenMovieIds.has(entry.movieId)){seenMovieIds.add(entry.movieId);uniqueHistory.push(entry);}});setWatchHistory(uniqueHistory);}if(watchlistRes.ok){const data=await watchlistRes.json();const watchlistData=data.movies||data.watchlist||[];setWatchlist(watchlistData);// Save to cache for next time\ntry{localStorage.setItem(\"watchlist_\".concat(userId),JSON.stringify(watchlistData));}catch(e){console.warn('Failed to cache watchlist:',e);}}}catch(e){console.warn('Failed to fetch user data:',e);}}// Fetch new releases in background\nfetch(\"\".concat(API_BASE,\"/movies/new-releases?limit=30\")).then(newRes=>newRes.ok?newRes.json():null).then(data=>{if(data){const movies=data.movies||[];setNewMovies(movies);setLoadingSections(prev=>_objectSpread(_objectSpread({},prev),{},{new:false}));// Cache for instant display next time\ntry{localStorage.setItem('cached_new_releases',JSON.stringify({movies,ts:Date.now()}));}catch(e){}if(movies.length>0){fetchCommentCounts(movies);}}}).catch(e=>{console.warn('Failed to fetch new releases:',e);setLoadingSections(prev=>_objectSpread(_objectSpread({},prev),{},{new:false}));});};fetchMovies();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"hero-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero-background\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero-posters-grid\",children:heroMovies.length>0?heroMovies.map((movie,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"hero-poster-item\",style:{animationDelay:\"\".concat(idx*0.1,\"s\")},children:/*#__PURE__*/_jsx(\"img\",{src:movie.poster_url||movie.poster_path||\"https://picsum.photos/seed/\".concat(movie.id,\"/300/450\"),alt:movie.title,loading:\"lazy\"})},idx)):// Placeholder gradient boxes while loading\nArray.from({length:20}).map((_,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"hero-poster-item placeholder\",style:{animationDelay:\"\".concat(idx*0.1,\"s\")}},idx))}),/*#__PURE__*/_jsx(\"div\",{className:\"hero-gradient-overlay\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero-overlay\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"hero-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"hero-title-main\",children:\"Kh\\xE1m ph\\xE1 th\\u1EBF gi\\u1EDBi \\u0111i\\u1EC7n \\u1EA3nh\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hero-title-sub\",children:\"Kh\\xF4ng gi\\u1EDBi h\\u1EA1n\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"hero-subtitle\",children:\"H\\xE0ng ngh\\xECn b\\u1ED9 phim, series hot \\u0111ang ch\\u1EDD b\\u1EA1n\"}),/*#__PURE__*/_jsx(\"p\",{className:\"hero-description\",children:\"Ch\\u1EA5t l\\u01B0\\u1EE3ng HD/4K cao c\\u1EA5p \\u2022 C\\u1EADp nh\\u1EADt li\\xEAn t\\u1EE5c m\\u1ED7i ng\\xE0y \\u2022 Xem m\\u1ECDi l\\xFAc m\\u1ECDi n\\u01A1i\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"T\\xECm ki\\u1EBFm phim, di\\u1EC5n vi\\xEAn, \\u0111\\u1EA1o di\\u1EC5n...\",value:searchQuery,onChange:e=>handleSearch(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"search-btn\",children:\"T\\xECm ki\\u1EBFm\"})]})]})]}),!isSearching&&/*#__PURE__*/_jsxs(\"div\",{className:\"filter-bar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"filter-group\",children:/*#__PURE__*/_jsxs(\"select\",{value:genreFilter,onChange:e=>setGenreFilter(e.target.value),className:\"filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"T\\u1EA5t c\\u1EA3 th\\u1EC3 lo\\u1EA1i\"}),/*#__PURE__*/_jsx(\"option\",{value:\"action\",children:\"H\\xE0nh \\u0111\\u1ED9ng\"}),/*#__PURE__*/_jsx(\"option\",{value:\"comedy\",children:\"H\\xE0i\"}),/*#__PURE__*/_jsx(\"option\",{value:\"drama\",children:\"Ch\\xEDnh k\\u1ECBch\"}),/*#__PURE__*/_jsx(\"option\",{value:\"horror\",children:\"Kinh d\\u1ECB\"}),/*#__PURE__*/_jsx(\"option\",{value:\"romance\",children:\"L\\xE3ng m\\u1EA1n\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-group\",children:/*#__PURE__*/_jsxs(\"select\",{value:yearFilter,onChange:e=>setYearFilter(e.target.value),className:\"filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"T\\u1EA5t c\\u1EA3 n\\u0103m\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2024\",children:\"2024\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2023\",children:\"2023\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2020-2022\",children:\"2020-2022\"}),/*#__PURE__*/_jsx(\"option\",{value:\"older\",children:\"Tr\\u01B0\\u1EDBc 2020\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-group\",children:/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"rating\",children:\"\\u0110\\xE1nh gi\\xE1 cao\"}),/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:\"M\\u1EDBi nh\\u1EA5t\"}),/*#__PURE__*/_jsx(\"option\",{value:\"title\",children:\"T\\xEAn A-Z\"})]})})]}),isSearching&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"section-title\",children:[\"\\uD83D\\uDD0E K\\u1EBFt qu\\u1EA3 t\\xECm ki\\u1EBFm \\\"\",searchQuery,\"\\\"\"]})}),searchResults.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:searchResults.map((movie,idx)=>/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick},idx))}):/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"Kh\\xF4ng t\\xECm th\\u1EA5y phim\"})]}),!isSearching&&watchHistory.length>0&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDCFA Ti\\u1EBFp t\\u1EE5c xem\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:watchHistory.slice(0,12).map(entry=>{const movie=allMovies.find(m=>m.id===entry.movieId);return movie?/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick},entry.movieId):null;})})]}),!isSearching&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDD25 \\u0110ang Hot Nh\\u1EA5t\"})}),loadingSections.trending?/*#__PURE__*/_jsx(MovieGridSkeleton,{count:12}):trendingMovies.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"Ch\\u01B0a c\\xF3 phim trending\"}):(()=>{const filtered=filterMovies(trendingMovies).slice(0,12);return filtered.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:filtered.map((movie,idx)=>/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick},idx))}):/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"Kh\\xF4ng t\\xECm th\\u1EA5y phim ph\\xF9 h\\u1EE3p v\\u1EDBi b\\u1ED9 l\\u1ECDc\"});})()]}),!isSearching&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83C\\uDFAF G\\u1EE3i \\xDD D\\xE0nh Ri\\xEAng Cho B\\u1EA1n\"})}),loadingSections.featured?/*#__PURE__*/_jsx(MovieGridSkeleton,{count:6}):featuredMovies.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"Ch\\u01B0a c\\xF3 g\\u1EE3i \\xFD\"}):(()=>{const filtered=filterMovies(featuredMovies);return filtered.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:filtered.map((movie,idx)=>/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick},idx))}):/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"Kh\\xF4ng t\\xECm th\\u1EA5y phim ph\\xF9 h\\u1EE3p v\\u1EDBi b\\u1ED9 l\\u1ECDc\"});})()]}),!isSearching&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83C\\uDD95 Phim M\\u1EDBi C\\u1EADp Nh\\u1EADt\"})}),loadingSections.new?/*#__PURE__*/_jsx(MovieGridSkeleton,{count:12}):newMovies.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"Ch\\u01B0a c\\xF3 phim m\\u1EDBi\"}):(()=>{const filtered=filterMovies(newMovies).slice(0,12);return filtered.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:filtered.map((movie,idx)=>/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick},idx))}):/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"Kh\\xF4ng t\\xECm th\\u1EA5y phim ph\\xF9 h\\u1EE3p v\\u1EDBi b\\u1ED9 l\\u1ECDc\"});})()]}),!isSearching&&/*#__PURE__*/_jsxs(\"section\",{className:\"movie-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u2B50 \\u0110i\\u1EC3m Cao Nh\\u1EA5t\"})}),loadingSections.topRated?/*#__PURE__*/_jsx(MovieGridSkeleton,{count:12}):topRatedMovies.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"Ch\\u01B0a c\\xF3 phim\"}):(()=>{const filtered=filterMovies(topRatedMovies).slice(0,12);return filtered.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid\",children:filtered.map((movie,idx)=>/*#__PURE__*/_jsx(MovieCard,{movie:movie,commentCounts:commentCounts,onClick:onMovieClick},idx))}):/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"Kh\\xF4ng t\\xECm th\\u1EA5y phim ph\\xF9 h\\u1EE3p v\\u1EDBi b\\u1ED9 l\\u1ECDc\"});})()]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","API_BASE","MovieGridSkeleton","SectionSkeleton","jsx","_jsx","jsxs","_jsxs","MovieCard","_ref","movie","commentCounts","onClick","poster","poster_url","poster_path","className","children","src","alt","title","loading","decoding","onError","e","target","onerror","concat","id","year","vote_average","stopPropagation","HomePage","_ref2","onMovieClick","allMovies","setAllMovies","setCommentCounts","featuredMovies","setFeaturedMovies","newMovies","setNewMovies","topRatedMovies","setTopRatedMovies","trendingMovies","setTrendingMovies","heroMovies","setHeroMovies","watchHistory","setWatchHistory","setLoading","loadingSections","setLoadingSections","trending","featured","topRated","new","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearching","setIsSearching","searchTimeoutRef","genreFilter","setGenreFilter","yearFilter","setYearFilter","sortBy","setSortBy","handleSearch","query","current","clearTimeout","trim","length","cacheKey","toLowerCase","cached","localStorage","getItem","parsed","JSON","parse","age","Date","now","timestamp","results","setTimeout","_JSON$parse","storedUser","userId","userParam","encodeURIComponent","response","fetch","ok","data","json","setItem","stringify","error","console","fetchCommentCounts","movies","ids","map","m","filter","Boolean","resp","method","headers","body","movie_ids","d","counts","prev","_objectSpread","genreMap","filterMovies","filtered","targetGenres","genres","Array","isArray","genreNames","g","name","some","gn","tg","includes","warn","sort","a","b","localeCompare","fetchMovies","_JSON$parse2","watchlistCache","setWatchlist","trendingCache","slice","newCache","then","res","ts","catch","recResp","trendingIds","Set","uniqueMovies","has","featuredIds","historyRes","watchlistRes","Promise","all","history","uniqueHistory","seenMovieIds","forEach","entry","movieId","add","push","watchlistData","watchlist","newRes","idx","style","animationDelay","from","_","type","placeholder","value","onChange","find","count"],"sources":["D:/cn/phim/frontend/src/pages/HomePage.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport './HomePage.css';\r\nimport { API_BASE } from '../config';\r\nimport { MovieGridSkeleton, SectionSkeleton } from '../components/MovieSkeleton';\r\n\r\nfunction MovieCard({ movie, commentCounts, onClick }) {\r\n  const poster = movie.poster_url || movie.poster_path || movie.poster;\r\n  return (\r\n    <div className=\"movie-card\" onClick={() => onClick && onClick(movie)}>\r\n      <div className=\"movie-thumb\">\r\n        {poster ? (\r\n          <img \r\n            src={poster} \r\n            alt={movie.title} \r\n            loading=\"lazy\" \r\n            decoding=\"async\"\r\n            onError={(e) => {\r\n              e.target.onerror = null;\r\n              e.target.src = `https://picsum.photos/seed/${movie.id || movie.title}/300/450`;\r\n            }}\r\n          />\r\n        ) : (\r\n          <div className=\"no-poster\">Kh√¥ng c√≥ poster</div>\r\n        )}\r\n        <div className=\"movie-overlay\">\r\n          <div className=\"overlay-content\">\r\n            <h3 className=\"movie-title\">{movie.title}</h3>\r\n            <div className=\"movie-meta\">\r\n              <span className=\"year\">{movie.year}</span>\r\n              <span className=\"rating\">‚≠ê {movie.vote_average || 'N/A'}</span>\r\n              <span className=\"comments\">üí¨ {commentCounts && (commentCounts[movie.id] || 0)}</span>\r\n            </div>\r\n            <div className=\"movie-actions\">\r\n              <button className=\"btn-play\" onClick={(e) => { e.stopPropagation(); onClick && onClick(movie); }}>\r\n                ‚ñ∂ Xem phim\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function HomePage({ onMovieClick }) {\r\n  const [allMovies, setAllMovies] = useState([]);\r\n  const [commentCounts, setCommentCounts] = useState({});\r\n  const [featuredMovies, setFeaturedMovies] = useState([]);\r\n  const [newMovies, setNewMovies] = useState([]);\r\n  const [topRatedMovies, setTopRatedMovies] = useState([]);\r\n  const [trendingMovies, setTrendingMovies] = useState([]);\r\n  const [heroMovies, setHeroMovies] = useState([]);\r\n  const [watchHistory, setWatchHistory] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loadingSections, setLoadingSections] = useState({\r\n    trending: true,\r\n    featured: true,\r\n    topRated: true,\r\n    new: true\r\n  });\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const searchTimeoutRef = useRef(null);\r\n  \r\n  // Filter states\r\n  const [genreFilter, setGenreFilter] = useState('all');\r\n  const [yearFilter, setYearFilter] = useState('all');\r\n  const [sortBy, setSortBy] = useState('rating');\r\n\r\n  const handleSearch = async (query) => {\r\n    setSearchQuery(query);\r\n    if (searchTimeoutRef.current) {\r\n      clearTimeout(searchTimeoutRef.current);\r\n    }\r\n    if (query.trim().length > 0) {\r\n      // Check cache first for instant results\r\n      const cacheKey = `search_${query.toLowerCase().trim()}`;\r\n      const cached = localStorage.getItem(cacheKey);\r\n      if (cached) {\r\n        try {\r\n          const parsed = JSON.parse(cached);\r\n          const age = Date.now() - parsed.timestamp;\r\n          if (age < 300000) { // 5 minutes cache\r\n            setSearchResults(parsed.results || []);\r\n            setIsSearching(true);\r\n            return;\r\n          }\r\n        } catch (e) {}\r\n      }\r\n      \r\n      searchTimeoutRef.current = setTimeout(async () => {\r\n        setIsSearching(true);\r\n        try {\r\n          // Save search to history\r\n          const storedUser = localStorage.getItem('user');\r\n          const userId = storedUser ? JSON.parse(storedUser)?.userId : null;\r\n          const userParam = userId ? `&user_id=${encodeURIComponent(userId)}` : '';\r\n          \r\n          const response = await fetch(`${API_BASE}/movies/autocomplete?q=${encodeURIComponent(query)}&n=20${userParam}`);\r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            const results = data.results || [];\r\n            setSearchResults(results);\r\n            \r\n            // Cache results\r\n            try {\r\n              localStorage.setItem(cacheKey, JSON.stringify({\r\n                results: results,\r\n                timestamp: Date.now()\r\n              }));\r\n            } catch (e) {}\r\n          } else {\r\n            setSearchResults([]);\r\n          }\r\n        } catch (error) {\r\n          console.error('Search failed:', error);\r\n          setSearchResults([]);\r\n        }\r\n      }, 150); // Faster debounce\r\n    } else {\r\n      setIsSearching(false);\r\n      setSearchResults([]);\r\n    }\r\n  };\r\n\r\n  const fetchCommentCounts = async (movies) => {\r\n    try {\r\n      const ids = movies.map(m => m.id).filter(Boolean);\r\n      if (!ids.length) return;\r\n      const resp = await fetch(`${API_BASE}/movies/comments/counts`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ movie_ids: ids }),\r\n      });\r\n      if (resp.ok) {\r\n        const d = await resp.json();\r\n        const counts = d.counts || d || {};\r\n        setCommentCounts(prev => ({ ...prev, ...counts }));\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to fetch comment counts:', e);\r\n    }\r\n  };\r\n\r\n  // Map Vietnamese genre names to English equivalents\r\n  const genreMap = {\r\n    'action': ['action', 'h√†nh ƒë·ªông'],\r\n    'comedy': ['comedy', 'h√†i'],\r\n    'drama': ['drama', 'ch√≠nh k·ªãch'],\r\n    'horror': ['horror', 'kinh d·ªã'],\r\n    'romance': ['romance', 'l√£ng m·∫°n']\r\n  };\r\n\r\n  const filterMovies = (movies) => {\r\n    let filtered = [...movies];\r\n    \r\n    // Genre filter - match both English and Vietnamese names\r\n    if (genreFilter !== 'all') {\r\n      const targetGenres = genreMap[genreFilter.toLowerCase()] || [genreFilter.toLowerCase()];\r\n      filtered = filtered.filter(m => {\r\n        try {\r\n          let genres = m.genres;\r\n          if (typeof genres === 'string') {\r\n            genres = JSON.parse(genres);\r\n          }\r\n          if (Array.isArray(genres)) {\r\n            const genreNames = genres.map(g => {\r\n              if (typeof g === 'string') return g.toLowerCase();\r\n              if (g.name) return g.name.toLowerCase();\r\n              return '';\r\n            });\r\n            // Check if any genre name matches any target genre\r\n            return genreNames.some(gn => \r\n              targetGenres.some(tg => gn.includes(tg) || tg.includes(gn))\r\n            );\r\n          }\r\n          return false;\r\n        } catch (e) {\r\n          console.warn('Genre parse error:', e);\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n    \r\n    // Year filter\r\n    if (yearFilter !== 'all') {\r\n      if (yearFilter === '2024') {\r\n        filtered = filtered.filter(m => m.year >= 2024);\r\n      } else if (yearFilter === '2023') {\r\n        filtered = filtered.filter(m => m.year === 2023);\r\n      } else if (yearFilter === '2020-2022') {\r\n        filtered = filtered.filter(m => m.year >= 2020 && m.year <= 2022);\r\n      } else if (yearFilter === 'older') {\r\n        filtered = filtered.filter(m => m.year < 2020);\r\n      }\r\n    }\r\n    \r\n    // Sorting\r\n    if (sortBy === 'rating') {\r\n      filtered.sort((a, b) => (b.vote_average || 0) - (a.vote_average || 0));\r\n    } else if (sortBy === 'newest') {\r\n      filtered.sort((a, b) => (b.year || 0) - (a.year || 0));\r\n    } else if (sortBy === 'title') {\r\n      filtered.sort((a, b) => (a.title || '').localeCompare(b.title || ''));\r\n    }\r\n    \r\n    return filtered;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchMovies = async () => {\r\n      const storedUser = localStorage.getItem('user');\r\n      const userId = storedUser ? JSON.parse(storedUser)?.userId : null;\r\n      \r\n      // INSTANT DISPLAY: Load from cache FIRST, show immediately\r\n      try {\r\n        // Load watchlist from cache FIRST\r\n        if (userId) {\r\n          const watchlistCache = localStorage.getItem(`watchlist_${userId}`);\r\n          if (watchlistCache) {\r\n            try {\r\n              const cached = JSON.parse(watchlistCache);\r\n              if (Array.isArray(cached)) {\r\n                setWatchlist(cached);\r\n              }\r\n            } catch (e) {}\r\n          }\r\n        }\r\n        \r\n        // Load trending from cache instantly\r\n        const trendingCache = localStorage.getItem('cached_trending');\r\n        if (trendingCache) {\r\n          try {\r\n            const parsed = JSON.parse(trendingCache);\r\n            if (parsed.movies && parsed.movies.length > 0) {\r\n              setTrendingMovies(parsed.movies);\r\n              setHeroMovies(parsed.movies.slice(0, 20));\r\n              setLoadingSections(prev => ({ ...prev, trending: false }));\r\n            }\r\n          } catch (e) {}\r\n        }\r\n        \r\n        // Load featured from cache instantly\r\n        const cacheKey = `cached_recs_collaborative_${userId || 'public'}`;\r\n        const cached = localStorage.getItem(cacheKey);\r\n        if (cached) {\r\n          try {\r\n            const parsed = JSON.parse(cached);\r\n            const movies = parsed.results || [];\r\n            if (movies.length > 0) {\r\n              const featured = movies.filter(m => m.vote_average >= 7).slice(0, 6);\r\n              setFeaturedMovies(featured);\r\n              setAllMovies(movies);\r\n              setTopRatedMovies([...movies].sort((a, b) => (b.vote_average || 0) - (a.vote_average || 0)).slice(0, 12));\r\n              setLoadingSections(prev => ({ ...prev, featured: false, topRated: false }));\r\n            }\r\n          } catch (e) {}\r\n        }\r\n        \r\n        // Load new releases from cache\r\n        const newCache = localStorage.getItem('cached_new_releases');\r\n        if (newCache) {\r\n          try {\r\n            const parsed = JSON.parse(newCache);\r\n            if (parsed.movies && parsed.movies.length > 0) {\r\n              setNewMovies(parsed.movies);\r\n              setLoadingSections(prev => ({ ...prev, new: false }));\r\n            }\r\n          } catch (e) {}\r\n        }\r\n      } catch (e) {\r\n        console.warn('Cache load failed:', e);\r\n      }\r\n      \r\n      // BACKGROUND FETCH: Update with fresh data without blocking UI\r\n      try {\r\n        // Fetch trending in background\r\n        fetch(`${API_BASE}/movies/trending?limit=12`)\r\n          .then(res => res.ok ? res.json() : null)\r\n          .then(data => {\r\n            if (data && data.movies) {\r\n              const movies = data.movies;\r\n              setTrendingMovies(movies);\r\n              setHeroMovies(movies.slice(0, 20));\r\n              setLoadingSections(prev => ({ ...prev, trending: false }));\r\n              \r\n              // Cache for next time\r\n              try {\r\n                localStorage.setItem('cached_trending', JSON.stringify({ movies, ts: Date.now() }));\r\n              } catch (e) {}\r\n              \r\n              if (movies.length > 0) {\r\n                fetchCommentCounts(movies);\r\n              }\r\n            }\r\n          })\r\n          .catch(e => {\r\n            console.error('Trending fetch failed:', e);\r\n            setLoadingSections(prev => ({ ...prev, trending: false }));\r\n          });\r\n\r\n        // Fetch featured recommendations (in background, async, don't wait)\r\n        setLoadingSections(prev => ({ ...prev, featured: true, topRated: true }));\r\n        fetch(`${API_BASE}/recommendations?rec_type=collaborative&n=50`)\r\n          .then(recResp => {\r\n            if (recResp.ok) {\r\n              return recResp.json();\r\n            }\r\n            setLoadingSections(prev => ({ ...prev, featured: false, topRated: false }));\r\n            return null;\r\n          })\r\n          .then(data => {\r\n            if (data) {\r\n              const movies = data.results || [];\r\n              \r\n              // Filter out movies that are already in trending to avoid duplicates\r\n              const trendingIds = new Set(trendingMovies.map(m => m.id));\r\n              const uniqueMovies = movies.filter(m => !trendingIds.has(m.id));\r\n              \r\n              // Split into sections ensuring no overlap\r\n              const featured = uniqueMovies.filter(m => m.vote_average >= 7).slice(0, 6);\r\n              const featuredIds = new Set(featured.map(m => m.id));\r\n              \r\n              // Top rated - exclude trending and featured\r\n              const topRated = [...uniqueMovies]\r\n                .filter(m => !featuredIds.has(m.id))\r\n                .sort((a, b) => (b.vote_average || 0) - (a.vote_average || 0))\r\n                .slice(0, 12);\r\n              \r\n              setFeaturedMovies(featured);\r\n              setAllMovies(uniqueMovies.slice(0, 12));\r\n              setTopRatedMovies(topRated);\r\n              setLoadingSections(prev => ({ ...prev, featured: false, topRated: false }));\r\n              localStorage.setItem(cacheKey, JSON.stringify({ results: uniqueMovies }));\r\n              \r\n              // Fetch comment counts for all movies\r\n              fetchCommentCounts([...featured, ...topRated]);\r\n            }\r\n          })\r\n          .catch(e => {\r\n            console.warn('Recommendations fetch failed:', e);\r\n            setLoadingSections(prev => ({ ...prev, featured: false, topRated: false }));\r\n          });\r\n      } catch (e) {\r\n        console.warn('Priority fetch failed:', e);\r\n      }\r\n\r\n      // PRIORITY 2: Background fetches (don't block UI)\r\n      // Fetch user data\r\n      if (userId) {\r\n        try {\r\n          const [historyRes, watchlistRes] = await Promise.all([\r\n            fetch(`${API_BASE}/watch-history/${userId}`),\r\n            fetch(`${API_BASE}/watchlist/${userId}`)\r\n          ]);\r\n          \r\n          if (historyRes.ok) {\r\n            const data = await historyRes.json();\r\n            const history = data.movies || data.history || [];\r\n            \r\n            // Deduplicate by movieId - keep only most recent entry for each movie\r\n            const uniqueHistory = [];\r\n            const seenMovieIds = new Set();\r\n            history.forEach(entry => {\r\n              if (!seenMovieIds.has(entry.movieId)) {\r\n                seenMovieIds.add(entry.movieId);\r\n                uniqueHistory.push(entry);\r\n              }\r\n            });\r\n            \r\n            setWatchHistory(uniqueHistory);\r\n          }\r\n          if (watchlistRes.ok) {\r\n            const data = await watchlistRes.json();\r\n            const watchlistData = data.movies || data.watchlist || [];\r\n            setWatchlist(watchlistData);\r\n            \r\n            // Save to cache for next time\r\n            try {\r\n              localStorage.setItem(`watchlist_${userId}`, JSON.stringify(watchlistData));\r\n            } catch (e) {\r\n              console.warn('Failed to cache watchlist:', e);\r\n            }\r\n          }\r\n        } catch (e) {\r\n          console.warn('Failed to fetch user data:', e);\r\n        }\r\n      }\r\n\r\n      // Fetch new releases in background\r\n      fetch(`${API_BASE}/movies/new-releases?limit=30`)\r\n        .then(newRes => newRes.ok ? newRes.json() : null)\r\n        .then(data => {\r\n          if (data) {\r\n            const movies = data.movies || [];\r\n            setNewMovies(movies);\r\n            setLoadingSections(prev => ({ ...prev, new: false }));\r\n            \r\n            // Cache for instant display next time\r\n            try {\r\n              localStorage.setItem('cached_new_releases', JSON.stringify({ movies, ts: Date.now() }));\r\n            } catch (e) {}\r\n            \r\n            if (movies.length > 0) {\r\n              fetchCommentCounts(movies);\r\n            }\r\n          }\r\n        })\r\n        .catch(e => {\r\n          console.warn('Failed to fetch new releases:', e);\r\n          setLoadingSections(prev => ({ ...prev, new: false }));\r\n        });\r\n    };\r\n\r\n    fetchMovies();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"home-page\">\r\n      {/* Hero Section */}\r\n      <section className=\"hero-section\">\r\n        {/* Animated Movie Posters Background */}\r\n        <div className=\"hero-background\">\r\n          <div className=\"hero-posters-grid\">\r\n            {heroMovies.length > 0 ? (\r\n              heroMovies.map((movie, idx) => (\r\n                <div key={idx} className=\"hero-poster-item\" style={{ animationDelay: `${idx * 0.1}s` }}>\r\n                  <img \r\n                    src={movie.poster_url || movie.poster_path || `https://picsum.photos/seed/${movie.id}/300/450`} \r\n                    alt={movie.title}\r\n                    loading=\"lazy\"\r\n                  />\r\n                </div>\r\n              ))\r\n            ) : (\r\n              // Placeholder gradient boxes while loading\r\n              Array.from({ length: 20 }).map((_, idx) => (\r\n                <div key={idx} className=\"hero-poster-item placeholder\" style={{ animationDelay: `${idx * 0.1}s` }} />\r\n              ))\r\n            )}\r\n          </div>\r\n          <div className=\"hero-gradient-overlay\" />\r\n        </div>\r\n        \r\n        {/* Hero Content */}\r\n        <div className=\"hero-overlay\">\r\n          <h1 className=\"hero-title\">\r\n            <span className=\"hero-title-main\">Kh√°m ph√° th·∫ø gi·ªõi ƒëi·ªán ·∫£nh</span>\r\n            <span className=\"hero-title-sub\">Kh√¥ng gi·ªõi h·∫°n</span>\r\n          </h1>\r\n          <p className=\"hero-subtitle\">H√†ng ngh√¨n b·ªô phim, series hot ƒëang ch·ªù b·∫°n</p>\r\n          <p className=\"hero-description\">Ch·∫•t l∆∞·ª£ng HD/4K cao c·∫•p ‚Ä¢ C·∫≠p nh·∫≠t li√™n t·ª•c m·ªói ng√†y ‚Ä¢ Xem m·ªçi l√∫c m·ªçi n∆°i</p>\r\n          <div className=\"search-container\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"search-input\"\r\n              placeholder=\"T√¨m ki·∫øm phim, di·ªÖn vi√™n, ƒë·∫°o di·ªÖn...\"\r\n              value={searchQuery}\r\n              onChange={(e) => handleSearch(e.target.value)}\r\n            />\r\n            <button className=\"search-btn\">\r\n              T√¨m ki·∫øm\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Filter Bar */}\r\n      {!isSearching && (\r\n        <div className=\"filter-bar\">\r\n          <div className=\"filter-group\">\r\n            <select value={genreFilter} onChange={(e) => setGenreFilter(e.target.value)} className=\"filter-select\">\r\n              <option value=\"all\">T·∫•t c·∫£ th·ªÉ lo·∫°i</option>\r\n              <option value=\"action\">H√†nh ƒë·ªông</option>\r\n              <option value=\"comedy\">H√†i</option>\r\n              <option value=\"drama\">Ch√≠nh k·ªãch</option>\r\n              <option value=\"horror\">Kinh d·ªã</option>\r\n              <option value=\"romance\">L√£ng m·∫°n</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"filter-group\">\r\n            <select value={yearFilter} onChange={(e) => setYearFilter(e.target.value)} className=\"filter-select\">\r\n              <option value=\"all\">T·∫•t c·∫£ nƒÉm</option>\r\n              <option value=\"2024\">2024</option>\r\n              <option value=\"2023\">2023</option>\r\n              <option value=\"2020-2022\">2020-2022</option>\r\n              <option value=\"older\">Tr∆∞·ªõc 2020</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"filter-group\">\r\n            <select value={sortBy} onChange={(e) => setSortBy(e.target.value)} className=\"filter-select\">\r\n              <option value=\"rating\">ƒê√°nh gi√° cao</option>\r\n              <option value=\"newest\">M·ªõi nh·∫•t</option>\r\n              <option value=\"title\">T√™n A-Z</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Search Results */}\r\n      {isSearching && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">üîé K·∫øt qu·∫£ t√¨m ki·∫øm \"{searchQuery}\"</h2>\r\n          </div>\r\n          {searchResults.length > 0 ? (\r\n            <div className=\"movie-grid\">\r\n              {searchResults.map((movie, idx) => (\r\n                <MovieCard \r\n                  key={idx} \r\n                  movie={movie} \r\n                  commentCounts={commentCounts} \r\n                  onClick={onMovieClick}\r\n                />\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"no-results\">Kh√¥ng t√¨m th·∫•y phim</div>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {/* Watch History */}\r\n      {!isSearching && watchHistory.length > 0 && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">üì∫ Ti·∫øp t·ª•c xem</h2>\r\n          </div>\r\n          <div className=\"movie-grid\">\r\n            {watchHistory.slice(0, 12).map((entry) => {\r\n              const movie = allMovies.find(m => m.id === entry.movieId);\r\n              return movie ? (\r\n                <MovieCard \r\n                  key={entry.movieId} \r\n                  movie={movie} \r\n                  commentCounts={commentCounts} \r\n                  onClick={onMovieClick}\r\n                />\r\n              ) : null;\r\n            })}\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {/* Trending */}\r\n      {!isSearching && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">üî• ƒêang Hot Nh·∫•t</h2>\r\n          </div>\r\n          {loadingSections.trending ? (\r\n            <MovieGridSkeleton count={12} />\r\n          ) : trendingMovies.length === 0 ? (\r\n            <div className=\"no-results\">Ch∆∞a c√≥ phim trending</div>\r\n          ) : (() => {\r\n            const filtered = filterMovies(trendingMovies).slice(0, 12);\r\n            return filtered.length > 0 ? (\r\n              <div className=\"movie-grid\">\r\n                {filtered.map((movie, idx) => (\r\n                  <MovieCard \r\n                    key={idx} \r\n                    movie={movie} \r\n                    commentCounts={commentCounts} \r\n                    onClick={onMovieClick}\r\n                  />\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results\">Kh√¥ng t√¨m th·∫•y phim ph√π h·ª£p v·ªõi b·ªô l·ªçc</div>\r\n            );\r\n          })()}\r\n        </section>\r\n      )}\r\n\r\n      {/* Featured/Recommendations */}\r\n      {!isSearching && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">üéØ G·ª£i √ù D√†nh Ri√™ng Cho B·∫°n</h2>\r\n          </div>\r\n          {loadingSections.featured ? (\r\n            <MovieGridSkeleton count={6} />\r\n          ) : featuredMovies.length === 0 ? (\r\n            <div className=\"no-results\">Ch∆∞a c√≥ g·ª£i √Ω</div>\r\n          ) : (() => {\r\n            const filtered = filterMovies(featuredMovies);\r\n            return filtered.length > 0 ? (\r\n              <div className=\"movie-grid\">\r\n                {filtered.map((movie, idx) => (\r\n                  <MovieCard \r\n                    key={idx} \r\n                    movie={movie} \r\n                    commentCounts={commentCounts} \r\n                    onClick={onMovieClick}\r\n                  />\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results\">Kh√¥ng t√¨m th·∫•y phim ph√π h·ª£p v·ªõi b·ªô l·ªçc</div>\r\n            );\r\n          })()}\r\n        </section>\r\n      )}\r\n\r\n      {/* New Releases */}\r\n      {!isSearching && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">üÜï Phim M·ªõi C·∫≠p Nh·∫≠t</h2>\r\n          </div>\r\n          {loadingSections.new ? (\r\n            <MovieGridSkeleton count={12} />\r\n          ) : newMovies.length === 0 ? (\r\n            <div className=\"no-results\">Ch∆∞a c√≥ phim m·ªõi</div>\r\n          ) : (() => {\r\n            const filtered = filterMovies(newMovies).slice(0, 12);\r\n            return filtered.length > 0 ? (\r\n              <div className=\"movie-grid\">\r\n                {filtered.map((movie, idx) => (\r\n                  <MovieCard \r\n                    key={idx} \r\n                    movie={movie} \r\n                    commentCounts={commentCounts} \r\n                    onClick={onMovieClick}\r\n                  />\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results\">Kh√¥ng t√¨m th·∫•y phim ph√π h·ª£p v·ªõi b·ªô l·ªçc</div>\r\n            );\r\n          })()}\r\n        </section>\r\n      )}\r\n\r\n      {/* Top Rated */}\r\n      {!isSearching && (\r\n        <section className=\"movie-section\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-title\">‚≠ê ƒêi·ªÉm Cao Nh·∫•t</h2>\r\n          </div>\r\n          {loadingSections.topRated ? (\r\n            <MovieGridSkeleton count={12} />\r\n          ) : topRatedMovies.length === 0 ? (\r\n            <div className=\"no-results\">Ch∆∞a c√≥ phim</div>\r\n          ) : (() => {\r\n            const filtered = filterMovies(topRatedMovies).slice(0, 12);\r\n            return filtered.length > 0 ? (\r\n              <div className=\"movie-grid\">\r\n                {filtered.map((movie, idx) => (\r\n                  <MovieCard \r\n                    key={idx} \r\n                    movie={movie} \r\n                    commentCounts={commentCounts} \r\n                    onClick={onMovieClick}\r\n                  />\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results\">Kh√¥ng t√¨m th·∫•y phim ph√π h·ª£p v·ªõi b·ªô l·ªçc</div>\r\n            );\r\n          })()}\r\n        </section>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}